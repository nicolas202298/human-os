<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HUMAN-OS | Cognitive Kernel</title>
    <style>
        :root { --bg: #050505; --accent: #00f2ff; --panel: #0d0d0d; --gold: #d4af37; }
        body { background: var(--bg); color: #e0e0e0; font-family: 'Inter', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Lateral: Estrutura do Pensamento */
        #thought-map { width: 300px; background: #000; border-right: 1px solid #1a1a1a; padding: 20px; display: flex; flex-direction: column; gap: 20px; }
        .node { background: var(--panel); border: 1px solid #222; padding: 12px; border-radius: 8px; font-size: 11px; }
        .node label { color: var(--accent); font-weight: bold; text-transform: uppercase; font-size: 9px; display: block; margin-bottom: 5px; }

        /* Centro: Processamento de Fluxo */
        main { flex-grow: 1; display: flex; flex-direction: column; position: relative; }
        header { padding: 20px; border-bottom: 1px solid #1a1a1a; display: flex; justify-content: space-between; align-items: center; }
        #flow { flex-grow: 1; overflow-y: auto; padding: 40px 15%; display: flex; flex-direction: column; gap: 30px; }
        
        /* Blocos Cognitivos */
        .block { padding: 25px; border-radius: 12px; line-height: 1.7; position: relative; animation: fadeIn 0.5s ease; }
        .block.user { background: transparent; border-left: 2px solid var(--gold); align-self: flex-start; opacity: 0.8; }
        .block.ai { background: var(--panel); border: 1px solid #222; align-self: flex-stretch; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        
        /* Input: Destilador de Ideias */
        footer { padding: 30px 15%; background: linear-gradient(0deg, #050505 80%, transparent); }
        .input-container { background: #111; border: 1px solid #333; border-radius: 16px; padding: 15px; display: flex; flex-direction: column; }
        textarea { background: transparent; border: none; color: #fff; font-size: 16px; outline: none; resize: none; min-height: 60px; }
        .controls { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; border-top: 1px solid #222; padding-top: 10px; }
        
        button { background: var(--accent); color: #000; border: none; padding: 8px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 10px; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body onload="init()">

    <aside id="thought-map">
        <h2 style="font-size: 14px; letter-spacing: 2px;">HUMAN-OS <span style="font-weight:100;">v9.0</span></h2>
        <div class="node"><label>Estado Cognitivo</label><div id="cog-state">Aguardando Input...</div></div>
        <div class="node"><label>Decisão Pendente</label><div id="decision">Nenhuma identificada</div></div>
        <div class="node"><label>Foco Principal</label><div id="focus">Indefinido</div></div>
        
        <input type="password" id="key" placeholder="GROQ_API_KEY" style="margin-top:auto; background:#111; border:1px solid #333; color:#555; padding:8px; border-radius:5px; font-size:10px;">
    </aside>

    <main>
        <header>
            <div style="font-size: 10px; color: #444;">KERNEL: SOVEREIGN-1 // MEMORY: ACTIVE</div>
        </header>

        <div id="flow">
            <div class="block ai">
                <b>KERNEL:</b> Despeje seus pensamentos. Não se preocupe com a ordem. Eu farei a destilação e organizarei o caos.
            </div>
        </div>

        <footer>
            <div class="input-container">
                <textarea id="input" placeholder="Brain Dump: O que está na sua mente agora?"></textarea>
                <div class="controls">
                    <span style="font-size: 10px; color: #444;">Processamento Cognitivo Ativo</span>
                    <button onclick="processar()">Destilar Pensamento</button>
                </div>
            </div>
        </footer>
    </main>

<script>
    function init() { document.getElementById('key').value = localStorage.getItem('gkey') || ''; }

    async function processar() {
        const key = document.getElementById('key').value;
        const input = document.getElementById('input');
        const flow = document.getElementById('flow');
        const text = input.value.trim();
        
        if(!text || !key) return;
        localStorage.setItem('gkey', key);

        // UI: Bloco de Usuário (Pensamento Bruto)
        flow.innerHTML += `<div class="block user"><i>Brain Dump:</i><br>${text}</div>`;
        input.value = "";
        flow.scrollTop = flow.scrollHeight;

        document.getElementById('cog-state').innerText = "Analisando Caos...";

        try {
            const res = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                method: "POST",
                headers: { "Authorization": `Bearer ${key}`, "Content-Type": "application/json" },
                body: JSON.stringify({
                    model: "llama-3.3-70b-versatile",
                    messages: [
                        { role: "system", content: "Você é o Kernel do HUMAN-OS. Sua missão é estruturar o caos mental. Transforme o input do usuário em: 1. Sumário Executivo, 2. Pontos de Decisão, 3. Próximo Passo. Seja breve e ultra-lógico." },
                        { role: "user", content: text }
                    ]
                })
            });
            const data = await res.json();
            const reply = data.choices[0].message.content;

            // UI: Bloco de IA (Pensamento Destilado)
            flow.innerHTML += `<div class="block ai"><b>ESTRUTURA COGNITIVA:</b><br>${reply.replace(/\n/g, '<br>')}</div>`;
            
            // Simulação de atualização dos nós laterais
            document.getElementById('cog-state').innerText = "Clareza Alcançada";
            document.getElementById('focus').innerText = text.substring(0, 20) + "...";
            
        } catch (e) {
            flow.innerHTML += `<div style="color:red">Erro no Processamento.</div>`;
        }
        flow.scrollTop = flow.scrollHeight;
    }
</script>
</body>
</html>
